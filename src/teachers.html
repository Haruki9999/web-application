<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Манай багш нар - Pi Math Center</title>
    <link rel="stylesheet" href="styles/base.css">
    <link rel="stylesheet" href="styles/teachers.css">
    <link rel="stylesheet" href="styles/modal.css">
</head>

<body>
    <!-- Navbar (Simplified version of Index Nav) -->
    <nav class="navbar"
        style="background: white; box-shadow: var(--shadow-sm); position: sticky; top: 0; z-index: 100;">
        <div class="container"
            style="display: flex; justify-content: space-between; align-items: center; padding: 1rem;">
            <a href="index.html"
                style="font-size: 1.5rem; font-weight: 800; font-family: var(--font-heading); color: var(--primary-main);">Pi
                Math Center</a>
            <div style="display: flex; gap: 1.5rem; align-items: center;">
                <a href="index.html">Нүүр</a>
                <a href="login.html" class="btn btn-primary btn-sm">Нэвтрэх</a>
            </div>
        </div>
    </nav>

    <header class="teachers-header">
        <div class="container">
            <h1>Манай мэргэжилтнүүдтэй танилц</h1>
            <p style="color: var(--text-muted); font-size: 1.1rem; max-width: 600px; margin: 0 auto;">
                Математикыг эзэмшихэд тань туслах туршлагатай сурган хүмүүжүүлэгчид.
            </p>

            <div class="filter-bar">
                <button class="filter-btn active" data-filter="all">Бүх багш нар</button>
                <button class="filter-btn" data-filter="sat">SAT/ACT</button>
                <button class="filter-btn" data-filter="igcse">Cambridge (IGCSE/A-Level)</button>
                <button class="filter-btn" data-filter="national">Үндэсний хөтөлбөр</button>
            </div>
        </div>
    </header>

    <section class="container">
        <div class="teachers-grid-main" id="teachersList">
            <!-- JS Injected -->
        </div>
    </section>

    <!-- Footer -->
    <footer style="background: var(--text-main); color: white; padding: 3rem 0; margin-top: 4rem; text-align: center;">
        <p>&copy; 2025 Pi Math Center</p>
    </footer>

    <script src="js/utils.js"></script>
    <script src="js/data.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const teachers = JSON.parse(localStorage.getItem('teachers') || '[]');
            const container = document.getElementById('teachersList');
            const btns = document.querySelectorAll('.filter-btn');

            function renderTeachers(filter = 'all') {
                container.innerHTML = '';

                const filtered = filter === 'all'
                    ? teachers
                    : teachers.filter(t => {
                        const specs = t.specialization.map(s => s.toLowerCase());
                        if (filter === 'sat') return specs.some(s => s.includes('sat') || s.includes('act'));
                        if (filter === 'igcse') return specs.some(s => s.includes('igcse') || s.includes('level'));
                        if (filter === 'national') return specs.some(s => !s.includes('sat') && !s.includes('igcse')); // Simplified logic
                        return true;
                    });

                if (filtered.length === 0) {
                    container.innerHTML = '<p style="text-align: center; grid-column: 1/-1; color: var(--text-muted);">Энэ ангилалд тохирох багш олдсонгүй.</p>';
                    return;
                }

                container.innerHTML = filtered.map(t => `
                    <div class="teacher-profile-card">
                        <img src="${t.photo}" alt="${t.name}" class="profile-img-lg">
                        <h3 style="font-size: 1.5rem; margin-bottom: 0.5rem; color: var(--text-main);">${t.name}</h3>
                        <div class="profile-specs">
                            ${t.specialization.map(s => `<span class="spec-tag">${s}</span>`).join('')}
                        </div>
                        <p style="color: var(--text-muted); margin-bottom: 1.5rem;">${t.experience} Туршлага</p>
                        <p style="margin-bottom: 1.5rem; font-size: 0.9rem; line-height: 1.5;">${t.bio}</p>
                        <button class="btn btn-primary" onclick="showLoginPrompt()">Сургалтанд бүртгүүлэх</button>
                    </div>
                `).join('');
            }

            btns.forEach(btn => {
                btn.addEventListener('click', () => {
                    btns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    renderTeachers(btn.dataset.filter);
                });
            });

            // Initial Render
            renderTeachers();
        });

        function showLoginPrompt() {
            showModal('Нэвтрэх шаардлагатай', 'Сургалтанд бүртгүүлэхийн тулд сурагчаар нэвтэрнэ үү.', 'info', () => {
                window.location.href = 'login.html';
            });
            // Adjust Button Text
            setTimeout(() => {
                const btn = document.querySelector('#globalModal .btn-primary');
                if (btn) btn.textContent = 'Нэвтрэх хэсэг рүү очих';
            }, 0);
        }
    </script>
</body>

</html>